<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>说说react-native那些事儿 | 微笑的蛋壳呀</title>
    <meta name="description" content="饭要一口一口吃，路要一步一步走">
    
    
    <link rel="preload" href="/assets/css/0.styles.f3e3bf20.css" as="style"><link rel="preload" href="/assets/js/app.f3aa7ae7.js" as="script"><link rel="preload" href="/assets/js/2.8b2ad26f.js" as="script"><link rel="preload" href="/assets/js/15.0d028931.js" as="script"><link rel="prefetch" href="/assets/js/10.8a0e92ce.js"><link rel="prefetch" href="/assets/js/11.f3ad8ed2.js"><link rel="prefetch" href="/assets/js/12.3fa3dcfc.js"><link rel="prefetch" href="/assets/js/13.0e84be05.js"><link rel="prefetch" href="/assets/js/14.1a723e63.js"><link rel="prefetch" href="/assets/js/16.31b6de59.js"><link rel="prefetch" href="/assets/js/17.eeb4f597.js"><link rel="prefetch" href="/assets/js/18.681ccb12.js"><link rel="prefetch" href="/assets/js/3.dee5c784.js"><link rel="prefetch" href="/assets/js/4.fb7e678d.js"><link rel="prefetch" href="/assets/js/5.f36453ad.js"><link rel="prefetch" href="/assets/js/6.44f369e7.js"><link rel="prefetch" href="/assets/js/7.49f031c1.js"><link rel="prefetch" href="/assets/js/8.cb967335.js"><link rel="prefetch" href="/assets/js/9.b02a9ea0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f3e3bf20.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">微笑的蛋壳呀</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/frontEnd/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">后台</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/sherry_chan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/smilechenjia/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/frontEnd/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">后台</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/sherry_chan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  csdn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/smilechenjia/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontEnd/" class="sidebar-link">使用vuepress搭建博客</a></li><li><a href="/frontEnd/nginx.html" class="sidebar-link">部署vue前端项目到服务器上（nginx处理跨域）</a></li><li><a href="/frontEnd/vue.html" class="sidebar-link">如何使用vue-cli 3.0搭建多页面应用</a></li><li><a href="/frontEnd/node.html" class="sidebar-link">如何将node.js部署到服务器上</a></li><li><a href="/frontEnd/nginxh5.html" class="sidebar-link">如何使用nginx解决前端跨域问题</a></li><li><a href="/frontEnd/mobile.html" class="sidebar-link">用H5开发移动端页面的两三事</a></li><li><a href="/frontEnd/rnmac.html" class="sidebar-link">Mac下搭建react-native环境(ios)</a></li><li><a href="/frontEnd/rn1.html" class="active sidebar-link">说说react-native那些事儿</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#flexbox布局" class="sidebar-link">flexbox布局</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#touchableopacity" class="sidebar-link">TouchableOpacity</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#textinput" class="sidebar-link">TextInput</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#样式" class="sidebar-link">样式</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#在react-native里添加表格" class="sidebar-link">在react-native里添加表格</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#监听键盘事件，获得键盘高度" class="sidebar-link">监听键盘事件，获得键盘高度</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#react-native传递信息给h5" class="sidebar-link">react-native传递信息给h5</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#获得当前滚动高度" class="sidebar-link">获得当前滚动高度</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#获取元素相对位置" class="sidebar-link">获取元素相对位置</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#使用navigation跳转页面不更新" class="sidebar-link">使用navigation跳转页面不更新</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#下拉刷新" class="sidebar-link">下拉刷新</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#把内容套在一个边框图片里" class="sidebar-link">把内容套在一个边框图片里</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#如何在google里调试ios模拟器" class="sidebar-link">如何在google里调试iOS模拟器</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#如何在一段内容上布置蒙层，左滑后蒙层消失" class="sidebar-link">如何在一段内容上布置蒙层，左滑后蒙层消失</a></li><li class="sidebar-sub-header"><a href="/frontEnd/rn1.html#父组件传数据到子组件，子组件修改该数据后传回父组件" class="sidebar-link">父组件传数据到子组件，子组件修改该数据后传回父组件</a></li></ul></li><li><a href="/frontEnd/face.html" class="sidebar-link">人脸识别前端 demo</a></li><li><a href="/frontEnd/ipu.html" class="sidebar-link">如何在ipu里使用vue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="说说react-native那些事儿"><a href="#说说react-native那些事儿" aria-hidden="true" class="header-anchor">#</a> 说说react-native那些事儿</h1> <p><code>2019-9-29</code></p> <div class="tip custom-block"><p>react-native对我来说就是一个词 “new&quot;，现在就记录下这段时间对这块新大陆的探索之路吧</p></div> <h2 id="flexbox布局"><a href="#flexbox布局" aria-hidden="true" class="header-anchor">#</a> flexbox布局</h2> <p>在react-native中使用flexbox布局，以适用于不同屏幕尺寸。</p> <p>在父元素标明flex是1，flexDirection表示主轴方向，justifyContent表示主轴对齐方式，alignItems表示次轴对齐方式</p> <p>当justifyContent，alignItems的值都为center时，且父元素里只有一个子元素，则这个子元素居中</p> <h2 id="touchableopacity"><a href="#touchableopacity" aria-hidden="true" class="header-anchor">#</a> TouchableOpacity</h2> <p>TouchableOpacity特别好用，每次需要跳转的时候都可以用TouchableOpacity，它的onPress属性就是处理跳转参数的</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;TouchableOpacity 
   onPress={() =&gt; that.props.navigation.navigate('test', { id: id })}
&gt;
&lt;/TouchableOpacity&gt;
</code></pre></div><h2 id="textinput"><a href="#textinput" aria-hidden="true" class="header-anchor">#</a> TextInput</h2> <p>把secureTextEntry属性设置为true即可显示密码</p> <p>把autoCapitalize属性改为none则取消首字母大写</p> <h2 id="样式"><a href="#样式" aria-hidden="true" class="header-anchor">#</a> 样式</h2> <p>react-native里的样式都是驼峰式，样式总结有三种写法：</p> <ol><li>直接写在style属性里：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;Text style={{fontSize:14}}&gt;&lt;/Text&gt; 
</code></pre></div><ol start="2"><li>创建stylesheet</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;Text style={styles.textstyle}&gt;&lt;/Text&gt;
const styles = StyleSheet.create({
     textstyle: {
       color: '#000'
     }
})
</code></pre></div><ol start="3"><li>混合</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;View style={[styles.textstyle, {backgroundColor: 'red'}]}&gt;&lt;View&gt; 
</code></pre></div><h2 id="在react-native里添加表格"><a href="#在react-native里添加表格" aria-hidden="true" class="header-anchor">#</a> 在react-native里添加表格</h2> <p>使用react-native-table-component</p> <ol><li><p>在package.json里添加，之后使用yarn install重新安装即可</p></li> <li><p>引入react-native-table-component</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>import { Table, Row, Rows } from 'react-native-table-component';
</code></pre></div><ol start="3"><li>使用如下：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>//表格使用的数据格式如下
options: {
   tableHead: ['id', '姓名', '年龄'],        //表头
   tableData: [                            //表内容
      [1, '陈小', '23'],
      [2, '王王', '32'],
      [3, '刘大', '12']
   ]
}

&lt;Table borderStyle={{borderWidth: 1, borderColor: '#e8e8e8'}}&gt;     //表格外框 
    &lt;Row data={options.tableHead} /&gt;               //表头
    &lt;Rows data={options.tableData} /&gt;             //表格内容
&lt;/Table&gt;   
</code></pre></div><h2 id="监听键盘事件，获得键盘高度"><a href="#监听键盘事件，获得键盘高度" aria-hidden="true" class="header-anchor">#</a> 监听键盘事件，获得键盘高度</h2> <div class="language- extra-class"><pre class="language-text"><code>import Keyboard from 'react-native'        //引入keyboard

componentWillMount() {      //添加监听事件，监听“键盘出现”，“键盘隐藏”
  this.keyboardDidShowListener = Keyboard.addListener('keyboardDidShow',this._keyboardDidShow.bind(this));
  this.keyboardDidHideListener = Keyboard.addListener('keyboardDidHide',this._keyboardDidHide.bind(this));
}

_keyboardDidShow(e) {    //当监听到”键盘出现“时，调用这个函数，
  Platform.OS === 'ios' &amp;&amp;
    this.setState({
      keyBoardHeight: isIphoneX ? e.endCoordinates.height -34 : e.endCoordinates.height     
      //设置键盘高度，其中Platform用来判断当前环境是ios还是android
    });
}

_keyboardDidHide() {       //当“键盘隐藏”时，设置键盘高度为0
  this.setState({
    keyBoardHeight: 0
  });
}

componentWillUnmount(){   //组件销毁时事件也要移除
  this.keyboardDidShowListener.remove();
  this.keyboardDidHideListener.remove();
}
</code></pre></div><h2 id="react-native传递信息给h5"><a href="#react-native传递信息给h5" aria-hidden="true" class="header-anchor">#</a> react-native传递信息给h5</h2> <p>使用到了webview</p> <p>webview里</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;WebView
   ref={(webview) =&gt; {
     this.inweb = webview
   }}
   onLoadEnd={this.onLoadEnd}
   source={{uri: insideurl}}
/&gt;

onLoadEnd =(e)=&gt;{
  let data = {
    name:'adddd'
  };
  this.inweb&amp;&amp;this.inweb.postMessage(JSON.stringify(data));   //发送消息到H5
};
</code></pre></div><p>h5里：</p> <div class="language- extra-class"><pre class="language-text"><code>window.document.addEventListener('message', function(e) {        //注册事件 接收数据
   const message = e.data;      //e.data就是接收到的数据
})
</code></pre></div><h2 id="获得当前滚动高度"><a href="#获得当前滚动高度" aria-hidden="true" class="header-anchor">#</a> 获得当前滚动高度</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;ScrollView   scrollEventThrottle = {10}   onScroll={this._changeScroll.bind(this)}&gt;
&lt;/ScrollView&gt;

_changeScroll(e) {
  const scrollNow = e.nativeEvent.contentOffset.y;    //获得当前滚动高度
}
</code></pre></div><h2 id="获取元素相对位置"><a href="#获取元素相对位置" aria-hidden="true" class="header-anchor">#</a> 获取元素相对位置</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;View onLayout = {({nativeEvent: { layout: {x, y, width, height}}}) =&gt; {
     this._height = { y,height }
}&gt;
</code></pre></div><h2 id="使用navigation跳转页面不更新"><a href="#使用navigation跳转页面不更新" aria-hidden="true" class="header-anchor">#</a> 使用navigation跳转页面不更新</h2> <p>使用到DeviceEventEmitter</p> <p>如果A跳转到B</p> <p>A:要跳转的时候触发一个事件</p> <div class="language- extra-class"><pre class="language-text"><code>import DeviceEventEmitter from ‘react-native'
DeviceEventEmitter.emit('UPDATE',9999);
</code></pre></div><p>B:在componentdidmount里监听这个事件，然后强制刷新，重新调接口</p> <div class="language- extra-class"><pre class="language-text"><code>componentDidComponent(){
  this.subscription = DeviceEventEmitter.addListener('UPDATE',
    (param)=&gt;{
       this.forceUpdate();    //强制刷新页面
       this.getClue()           //重新获取接口
    })
}

componentWillUnmount() {     //在组件销毁时移除这个事件
  this.subscription.remove();
};
</code></pre></div><h2 id="下拉刷新"><a href="#下拉刷新" aria-hidden="true" class="header-anchor">#</a> 下拉刷新</h2> <div class="language- extra-class"><pre class="language-text"><code> &lt;ScrollView 
   refreshControl={
     &lt;RefreshControl
       refreshing={this.state.refreshing}
       onRefresh={this._onRefresh}
     /&gt;
   }
&gt;
&lt;/ScrollView&gt;

_onRefresh = () =&gt; {
  this.setState({refreshing: true});
  重新获取接口
  this.setState({refreshing: false});
}
</code></pre></div><h2 id="把内容套在一个边框图片里"><a href="#把内容套在一个边框图片里" aria-hidden="true" class="header-anchor">#</a> 把内容套在一个边框图片里</h2> <p>先写图片，再写被套的内容，保证图片和被套的内容高宽一致，且被套内容最外边的position是absolute</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Image source={shadow} style={{width: 100,height: 100}} resizeMode='stretch'&gt;&lt;/Image&gt;
&lt;View style={{position:'absolute',width:100,height:100}}&gt;
&lt;/View&gt;
</code></pre></div><h2 id="如何在google里调试ios模拟器"><a href="#如何在google里调试ios模拟器" aria-hidden="true" class="header-anchor">#</a> 如何在google里调试iOS模拟器</h2> <ul><li><p>运行模拟器：react-native run-ios</p></li> <li><p>command+d =&gt; Debug JS Remotely 此时会启动google</p></li> <li><p>在chrome里选择视图-&gt;开发者-&gt;开发者工具</p></li></ul> <h2 id="如何在一段内容上布置蒙层，左滑后蒙层消失"><a href="#如何在一段内容上布置蒙层，左滑后蒙层消失" aria-hidden="true" class="header-anchor">#</a> 如何在一段内容上布置蒙层，左滑后蒙层消失</h2> <p>使用绝对定位，不透明度，以及滑动触发事件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;View&gt;   //父组件，相对定位
  &lt;View&gt;&lt;/View&gt;//被盖住的内容
  {this.state.dim &amp;&amp; (    //蒙层，当dim为true时出现
     &lt;View 
        style={{ position: 'absolute', top: 0, left: 0, zIndex: 100,backgroundColor: 'rgba(0,0,0,0.7)'}}&gt; 
        //绝对定位，置于最上，背景模糊（透明度）
        &lt;ScrollView 
          horizontal={true} 
          onScrollEndDrag={(e) =&gt; this.dimScrollEndDrag(e)}&gt; 
          //滑动后触发事件
        &lt;/ScrollView&gt;
     &lt;/View&gt;
  )}
&lt;/View&gt;

dimScrollEndDrag = (e) =&gt; {   //当滑动后执行该事件，置dim为false，蒙层不展示
  this.setState({
    dim: false
  })
}
</code></pre></div><h2 id="父组件传数据到子组件，子组件修改该数据后传回父组件"><a href="#父组件传数据到子组件，子组件修改该数据后传回父组件" aria-hidden="true" class="header-anchor">#</a> 父组件传数据到子组件，子组件修改该数据后传回父组件</h2> <p>父组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Filtern
  industrytwo={this.state.industrytwo}   //传数据到子组件
  changeindus={elems =&gt; this._changeindus(elems)}  //从子组件拿回数据 
/&gt;
</code></pre></div><p>子组件</p> <div class="language- extra-class"><pre class="language-text"><code>this.props.industrytwo.    //从父组件拿到数据
this.props.changeindus(options);   //通过父组件的方法把数据传回父组件
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/frontEnd/rnmac.html" class="prev">
          Mac下搭建react-native环境(ios)
        </a></span> <span class="next"><a href="/frontEnd/face.html">
          人脸识别前端 demo
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f3aa7ae7.js" defer></script><script src="/assets/js/2.8b2ad26f.js" defer></script><script src="/assets/js/15.0d028931.js" defer></script>
  </body>
</html>
